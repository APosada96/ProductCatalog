@using Microsoft.AspNetCore.Components.WebAssembly.Hosting
@inject IWebAssemblyHostEnvironment Env

<ErrorBoundary @ref="_boundary">
    <ChildContent>
        @ChildContent
    </ChildContent>

    <ErrorContent Context="ex">
        <div class="alert alert-danger">
            <h4>Ups… ocurrió un error</h4>
            <p>Intenta nuevamente. Si persiste, contacta soporte.</p>

            <button class="btn btn-outline-danger" @onclick="Retry">Reintentar</button>

            @if (Env.IsDevelopment())
            {
                <hr />
                <pre style="white-space: pre-wrap;">@ex.ToString()</pre>
            }
        </div>
    </ErrorContent>
</ErrorBoundary>

@code {
    private ErrorBoundary? _boundary;

    [Parameter] public RenderFragment? ChildContent { get; set; }

    private void Retry() => _boundary?.Recover();
}
